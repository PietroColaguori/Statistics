<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv='cache-control' content='no-cache'> 
        <meta http-equiv='expires' content='0'> 
        <meta http-equiv='pragma' content='no-cache'>
        <title>Homework 2</title>
        <link rel="stylesheet" href="../style.css">
        <link rel="stylesheet" href="../prism.css"> 
    </head>
    <body>
        <!-- For this HW we are going to need AJAX -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/jszip.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/xlsx.js"></script>

        <h1>Homework 2</h1>
        <h2>Author: Pietro Colaguori 1936709</h2>
        <a href="../index.html">Home</a>
        <hr>
        <p>The request is as follows:</p><br>
        <pre class=" question">Choose 3 variables from our surveys:
            - one Qualitative
            - one Quantitative discrete
            - one Quantitative continuous (use class intervals in this case, obviously)
            
            create the most efficient algorithms to compute the frequency (absolute/relative/percentage) distribution of:
            
            - the 3 variables
            - the joint distribution of 2 variables (use a general logic, where variables could be any number).
            
            Double check/compare the results using some DBMS functionalities you prefer (eg., access, oracle online, postgres, ...)</pre>
        
        <h3 class="red">Professional Life Survey - Analysis</h3>
        <!-- Qualitative: expected work sector, Quantitative: expected salary, Quantitative Continous: height-->
        <p> Upload a XLSX file </p>
        <input type="file" id="fileInput" accept=".xlsx">
        <button id="upload" onclick="return analyze()">Upload</button>
        <div id="output"></div>

        <script>
        function analyze() {
            // Access contents of XLSX file
            var file = document.getElementById("fileInput").files[0];
            var reader = new FileReader();
            reader.onload = function(e) {
                var data = e.target.result;
                var workbook = XLSX.read(data, {type: 'binary'});
                var sheet_name_list = workbook.SheetNames;
                var xlData = XLSX.utils.sheet_to_json(workbook.Sheets[sheet_name_list[0]]);
                console.log(xlData);
            };
            reader.readAsBinaryString(file);
            
            // Access the values of the column "expected work sectors"
            var workSectors = [];
            for (var i = 0; i < xlData.length; i++) {
                workSectors.push(xlData[i]["Expected work sectors"]);
            }

            // Access the values of the column "expected salary"
            var expectedSalary = [];
            for (var i = 0; i < xlData.length; i++) {
                expectedSalary.push(xlData[i]["Expected salary"]);
            }

            // Access the values of the column "height"
            var height = [];
            for (var i = 0; i < xlData.length; i++) {
                height.push(xlData[i]["Height"]);
            }

            // Compute the frequency distribution of the 3 variables
            var workSectorsFreq = {};
            for (var i = 0; i < workSectors.length; i++) {
                if (workSectorsFreq[workSectors[i]] == undefined) {
                    workSectorsFreq[workSectors[i]] = 1;
                } else {
                    workSectorsFreq[workSectors[i]]++;
                }
            }
            console.log(workSectorsFreq);

            var expectedSalaryFreq = {};
            for (var i = 0; i < expectedSalary.length; i++) {
                if (expectedSalaryFreq[expectedSalary[i]] == undefined) {
                    expectedSalaryFreq[expectedSalary[i]] = 1;
                } else {
                    expectedSalaryFreq[expectedSalary[i]]++;
                }
            }
            console.log(expectedSalaryFreq);

            var heightFreq = {};
            for (var i = 0; i < height.length; i++) {
                if (heightFreq[height[i]] == undefined) {
                    heightFreq[height[i]] = 1;
                } else {
                    heightFreq[height[i]]++;
                }
            }
            console.log(heightFreq);
            
        }
        </script>

    </body>
</html>
